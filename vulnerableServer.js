const axios = require('axios')
const express = require('express')
const server = express();

const client = axios.default;
const port = 3001;

async function getByAxios(url, maxContentLength) {
  try {
    const response = client.get(url, {maxContentLength});
    console.log(response.data);
    console.log(`O conteÃºdo desta resposta tem ${response.data.length} bytes`);
    return response;
  }
  catch (err) {
    console.error(err);
  }
}

server.post('/', async (req, res) => {
  const url = req.body.url;
  const maxContentLength = 12;
  res.send(getByAxios(url, maxContentLength));
})

server.listen(port);