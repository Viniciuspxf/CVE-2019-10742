http = require('http')

const port = 3000;

function generateStringBySize(bytes) {
  let myHugeString = '';
  for (let i = 0; i < bytes; i++) {
    myHugeString += 'a';
  }
  return myHugeString;
}

http.createServer(function (req, res) {
  const size = Number(process.argv[2]) - 14;
  const jsonResp = JSON.stringify({content: generateStringBySize(size)});

  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.write(jsonResp);
  console.log(`Recebi uma chamada, devolvendo string de tamanho: ${jsonResp.length}`)
  res.end();
}).listen(port);
